<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ImmoLotse – Jetzt buchen</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
  :root {
    --navy: #0F2240;
    --navy-mid: #1A3A6B;
    --blue: #1E5CB3;
    --gold: #C9A84C;
    --gold-light: #E8C97A;
    --white: #FFFFFF;
    --off-white: #F7F8FC;
    --gray-light: #EEF1F8;
    --gray: #8A94A8;
    --text: #1A2338;
    --text-mid: #3D4F6B;
    --green: #2E7D32;
    --red: #C62828;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { font-family: 'DM Sans', sans-serif; color: var(--text); background: var(--off-white); overflow-x: hidden; }
  h1,h2,h3,h4 { font-family: 'Playfair Display', serif; }

  /* ── NAV ── */
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 200;
    display: flex; align-items: center; justify-content: space-between;
    padding: 16px 5%;
    background: rgba(255,255,255,0.97);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid rgba(15,34,64,0.08);
    box-shadow: 0 2px 20px rgba(15,34,64,0.06);
  }
  .logo { font-family: 'Playfair Display', serif; font-size: 1.4rem; font-weight: 700; color: var(--navy); text-decoration: none; }
  .logo span { color: var(--blue); }
  .nav-right { display: flex; align-items: center; gap: 16px; }
  .nav-links { display: flex; gap: 22px; align-items: center; }
  .nav-links a { text-decoration: none; color: var(--text-mid); font-size: 0.88rem; font-weight: 500; transition: color 0.2s; white-space: nowrap; }
  .nav-links a:hover { color: var(--blue); }
  .nav-links a.active { color: var(--blue); font-weight: 600; }
  .btn-nav { background: var(--navy) !important; color: var(--white) !important; padding: 9px 18px !important; border-radius: 8px; font-weight: 700 !important; }
  .btn-nav:hover { background: var(--blue) !important; }
  .nav-cart-btn {
    display: flex; align-items: center; gap: 7px;
    background: var(--off-white); border: 2px solid var(--gray-light);
    color: var(--navy); padding: 8px 14px; border-radius: 8px;
    cursor: pointer; font-family: 'DM Sans', sans-serif;
    font-weight: 600; font-size: 0.85rem; transition: all 0.2s;
    position: relative; white-space: nowrap;
  }
  .nav-cart-btn:hover { border-color: var(--navy); }
  .cart-badge {
    background: var(--gold); color: var(--navy);
    width: 19px; height: 19px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.7rem; font-weight: 800;
  }
  /* Hamburger */
  .hamburger { display: none; flex-direction: column; gap: 5px; background: none; border: none; cursor: pointer; padding: 4px; }
  .hamburger span { display: block; width: 24px; height: 2px; background: var(--navy); border-radius: 2px; transition: all 0.3s; }
  .hamburger.open span:nth-child(1) { transform: rotate(45deg) translate(5px, 5px); }
  .hamburger.open span:nth-child(2) { opacity: 0; }
  .hamburger.open span:nth-child(3) { transform: rotate(-45deg) translate(5px, -5px); }

  /* ── PAGE HEADER ── */
  .page-header {
    background: linear-gradient(160deg, var(--navy) 0%, var(--navy-mid) 100%);
    padding: 110px 5% 50px;
    text-align: center;
  }
  .page-header h1 { color: var(--white); font-size: clamp(1.6rem, 3vw, 2.4rem); margin-bottom: 10px; }
  .page-header p { color: rgba(255,255,255,0.65); font-size: 0.97rem; font-weight: 300; }

  /* ── STEPS BAR ── */
  .steps-bar {
    background: var(--white);
    border-bottom: 1px solid var(--gray-light);
    padding: 16px 5%;
    display: flex; justify-content: center;
    overflow-x: auto;
  }
  .step-item { display: flex; align-items: center; gap: 8px; padding: 0 16px; position: relative; }
  .step-item:not(:last-child)::after { content: '→'; position: absolute; right: -8px; color: var(--gray-light); font-size: 0.9rem; }
  .step-circle { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.78rem; font-weight: 700; flex-shrink: 0; transition: all 0.3s; }
  .step-circle.active { background: var(--blue); color: var(--white); }
  .step-circle.done { background: var(--green); color: var(--white); }
  .step-circle.inactive { background: var(--gray-light); color: var(--gray); }
  .step-label { font-size: 0.82rem; font-weight: 600; color: var(--text-mid); white-space: nowrap; }
  .step-label.active { color: var(--blue); }
  .step-label.done { color: var(--green); }

  /* ── MAIN ── */
  .shop-main { padding: 32px 5% 60px; max-width: 1200px; margin: 0 auto; }
  .view { display: none; }
  .view.active { display: block; }

  /* ── SECTION HEADER ── */
  .section-header { margin-bottom: 20px; }
  .section-header h2 { font-size: clamp(1.2rem, 2.5vw, 1.5rem); color: var(--navy); margin-bottom: 5px; }
  .section-header p { color: var(--text-mid); font-size: 0.87rem; font-weight: 300; }

  /* ── PACKAGES ── */
  .packages-row {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 40px;
  }
  .pkg {
    border-radius: 14px; padding: 24px 20px;
    border: 2px solid var(--gray-light);
    background: var(--white);
    transition: all 0.25s; cursor: pointer; position: relative;
  }
  .pkg:hover { border-color: var(--blue); box-shadow: 0 6px 24px rgba(30,92,179,0.09); }
  .pkg.selected { border-color: var(--blue); background: #F0F5FF; }
  .pkg.popular { border-color: var(--navy-mid); }
  .pkg-badge { display: inline-block; background: var(--gold); color: var(--navy); font-size: 0.68rem; font-weight: 700; letter-spacing: 0.5px; padding: 4px 10px; border-radius: 50px; margin-bottom: 12px; }
  .pkg-name { font-size: 1.15rem; color: var(--navy); margin-bottom: 4px; }
  .pkg-price { font-family: 'Playfair Display', serif; font-size: 1.8rem; font-weight: 700; color: var(--navy); margin-bottom: 4px; }
  .pkg-save { font-size: 0.75rem; color: var(--green); font-weight: 600; margin-bottom: 14px; }
  .pkg-features { list-style: none; margin-bottom: 18px; display: flex; flex-direction: column; gap: 8px; }
  .pkg-features li { font-size: 0.82rem; color: var(--text-mid); display: flex; align-items: flex-start; gap: 7px; line-height: 1.4; }
  .pkg-features li::before { content: '✓'; color: var(--blue); font-weight: 700; flex-shrink: 0; margin-top: 1px; }
  .btn-add-pkg { width: 100%; padding: 10px; border-radius: 8px; font-weight: 700; font-size: 0.87rem; cursor: pointer; border: 2px solid var(--navy); background: transparent; color: var(--navy); font-family: 'DM Sans', sans-serif; transition: all 0.2s; }
  .pkg:hover .btn-add-pkg, .pkg.selected .btn-add-pkg { background: var(--navy); color: var(--white); }
  .pkg.selected .btn-add-pkg { background: var(--blue); border-color: var(--blue); }
  .selected-check { position: absolute; top: 12px; right: 12px; width: 22px; height: 22px; background: var(--blue); border-radius: 50%; display: none; align-items: center; justify-content: center; color: var(--white); font-size: 0.7rem; }
  .pkg.selected .selected-check { display: flex; }

  /* ── DIVIDER ── */
  .or-divider { text-align: center; margin: 0 0 28px; position: relative; }
  .or-divider::before { content: ''; position: absolute; top: 50%; left: 0; right: 0; height: 1px; background: var(--gray-light); }
  .or-divider span { position: relative; background: var(--off-white); padding: 0 16px; color: var(--gray); font-size: 0.82rem; font-weight: 600; }

  /* ── SERVICE CARDS ── */
  .services-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 14px;
    margin-bottom: 40px;
  }
  .service-card {
    background: var(--white);
    border-radius: 14px;
    padding: 18px;
    border: 2px solid var(--gray-light);
    transition: all 0.2s;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    gap: 14px;
  }
  .service-card:hover { border-color: var(--blue); box-shadow: 0 4px 16px rgba(30,92,179,0.07); }
  .service-card.in-cart { border-color: var(--blue); background: #F0F5FF; }
  /* Top row: emoji + name + description */
  .service-top { display: flex; align-items: flex-start; gap: 12px; }
  .service-icon-box {
    width: 44px; height: 44px; border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    flex-shrink: 0; background: var(--off-white);
  }
  .service-icon-box i { width: 20px; height: 20px; color: var(--blue); stroke-width: 1.75; }
  .service-card.in-cart .service-icon-box { background: #E8F0FE; }
  .service-text { flex: 1; min-width: 0; }
  .service-text h4 { font-family: 'DM Sans', sans-serif; font-size: 0.9rem; font-weight: 600; color: var(--navy); margin-bottom: 3px; line-height: 1.3; }
  .service-text p { font-size: 0.77rem; color: var(--text-mid); line-height: 1.4; font-weight: 300; }
  /* Bottom row: price + button always inside card */
  .service-bottom {
    display: flex; align-items: center; justify-content: space-between;
    gap: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--gray-light);
  }
  .service-card.in-cart .service-bottom { border-top-color: rgba(30,92,179,0.15); }
  .service-price-tag { font-family: 'Playfair Display', serif; font-size: 1.2rem; font-weight: 700; color: var(--navy); flex-shrink: 0; }
  .btn-add-service {
    padding: 7px 16px; border-radius: 8px;
    font-size: 0.8rem; font-weight: 700; cursor: pointer;
    border: 2px solid var(--navy); background: transparent;
    color: var(--navy); font-family: 'DM Sans', sans-serif;
    transition: all 0.2s; white-space: nowrap; flex-shrink: 0;
  }
  .service-card:hover .btn-add-service { background: var(--navy); color: var(--white); }
  .service-card.in-cart .btn-add-service { background: var(--red); border-color: var(--red); color: var(--white); }

  /* ── PROCEED BUTTON ── */
  .proceed-bar { text-align: center; padding: 16px 0 40px; }
  .btn-proceed {
    background: var(--navy); color: var(--white);
    padding: 14px 44px; border-radius: 12px;
    font-weight: 700; font-size: 0.97rem;
    cursor: pointer; border: none; font-family: 'DM Sans', sans-serif;
    transition: all 0.2s;
  }
  .btn-proceed:hover { background: var(--blue); transform: translateY(-1px); }
  .proceed-note { margin-top: 8px; color: var(--gray); font-size: 0.78rem; }

  /* ── CART OVERLAY ── */
  .cart-overlay { position: fixed; inset: 0; background: rgba(15,34,64,0.4); z-index: 300; opacity: 0; pointer-events: none; transition: opacity 0.3s; }
  .cart-overlay.open { opacity: 1; pointer-events: all; }
  .cart-panel {
    position: fixed; top: 0; right: 0; bottom: 0;
    width: min(420px, 100vw);
    background: var(--white); z-index: 301;
    transform: translateX(100%);
    transition: transform 0.35s cubic-bezier(0.4,0,0.2,1);
    display: flex; flex-direction: column;
    box-shadow: -8px 0 40px rgba(15,34,64,0.15);
  }
  .cart-panel.open { transform: translateX(0); }
  .cart-header { display: flex; align-items: center; justify-content: space-between; padding: 22px 22px 18px; border-bottom: 1px solid var(--gray-light); flex-shrink: 0; }
  .cart-title { font-family: 'Playfair Display', serif; font-size: 1.2rem; color: var(--navy); }
  .cart-close { width: 32px; height: 32px; border-radius: 50%; background: var(--off-white); border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 1rem; color: var(--text-mid); transition: background 0.2s; }
  .cart-close:hover { background: var(--gray-light); }
  .cart-items { flex: 1; overflow-y: auto; padding: 14px 22px; }
  .cart-empty { text-align: center; padding: 44px 20px; color: var(--gray); }
  .cart-empty-icon { margin-bottom: 12px; color: var(--gray); } .cart-empty-icon i { width: 36px; height: 36px; }
  .cart-empty p { font-size: 0.87rem; }
  .cart-item { display: flex; align-items: center; gap: 12px; padding: 14px 0; border-bottom: 1px solid var(--gray-light); }
  .cart-item:last-child { border-bottom: none; }
  .cart-item-emoji, .cart-item-badge { width: 40px; height: 40px; background: #EEF3FB; border-radius: 9px; display: flex; align-items: center; justify-content: center; font-size: 0.68rem; font-weight: 800; color: var(--blue); flex-shrink: 0; letter-spacing: 0.3px; }
  .cart-item-info { flex: 1; min-width: 0; }
  .cart-item-name { font-size: 0.85rem; font-weight: 600; color: var(--navy); margin-bottom: 2px; }
  .cart-item-price { font-size: 0.8rem; color: var(--blue); font-weight: 600; }
  .cart-item-remove { background: none; border: none; cursor: pointer; color: var(--gray); font-size: 1rem; padding: 4px; border-radius: 4px; transition: color 0.2s; flex-shrink: 0; }
  .cart-item-remove:hover { color: var(--red); }
  .cart-footer { padding: 18px 22px; border-top: 1px solid var(--gray-light); flex-shrink: 0; }
  .cart-total-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 14px; }
  .cart-total-label { font-size: 0.88rem; color: var(--text-mid); }
  .cart-total-amount { font-family: 'Playfair Display', serif; font-size: 1.4rem; font-weight: 700; color: var(--navy); }
  .cart-note { font-size: 0.75rem; color: var(--gray); margin-bottom: 14px; }
  .btn-checkout { width: 100%; padding: 14px; background: var(--navy); color: var(--white); border: none; border-radius: 10px; font-weight: 700; font-size: 0.92rem; cursor: pointer; font-family: 'DM Sans', sans-serif; transition: background 0.2s; }
  .btn-checkout:hover { background: var(--blue); }
  .btn-checkout:disabled { background: var(--gray); cursor: not-allowed; }

  /* ── CHECKOUT ── */
  .back-btn { display: inline-flex; align-items: center; gap: 7px; background: none; border: 2px solid var(--gray-light); color: var(--text-mid); padding: 8px 16px; border-radius: 8px; cursor: pointer; font-family: 'DM Sans', sans-serif; font-size: 0.86rem; font-weight: 600; margin-bottom: 24px; transition: all 0.2s; }
  .back-btn:hover { border-color: var(--navy); color: var(--navy); }
  .checkout-grid { display: grid; grid-template-columns: 1fr 360px; gap: 28px; align-items: start; }
  .checkout-form-box { background: var(--white); border-radius: 16px; padding: 28px; border: 1px solid var(--gray-light); margin-bottom: 20px; }
  .form-section-title { font-family: 'Playfair Display', serif; font-size: 1.1rem; color: var(--navy); margin-bottom: 20px; padding-bottom: 12px; border-bottom: 1px solid var(--gray-light); display: flex; align-items: center; gap: 8px; }
  .form-section-title i { width: 18px; height: 18px; color: var(--blue); }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; margin-bottom: 14px; }
  .form-row.full { grid-template-columns: 1fr; }
  .form-group { display: flex; flex-direction: column; gap: 5px; }
  .form-label { font-size: 0.8rem; font-weight: 600; color: var(--navy); }
  .form-input, .form-select, .form-textarea { padding: 11px 14px; border: 2px solid var(--gray-light); border-radius: 9px; font-size: 0.88rem; font-family: 'DM Sans', sans-serif; color: var(--text); outline: none; transition: border-color 0.2s; background: var(--white); }
  .form-input:focus, .form-select:focus, .form-textarea:focus { border-color: var(--blue); }
  .form-textarea { resize: vertical; min-height: 80px; }
  .form-input::placeholder { color: var(--gray); }
  /* Payment */
  .payment-options { display: flex; flex-direction: column; gap: 10px; margin-bottom: 18px; }
  .payment-option { display: flex; align-items: center; gap: 12px; padding: 14px 16px; border: 2px solid var(--gray-light); border-radius: 10px; cursor: pointer; transition: all 0.2s; }
  .payment-option:hover { border-color: var(--blue); }
  .payment-option.selected { border-color: var(--blue); background: #F0F5FF; }
  .payment-option input[type="radio"] { width: 16px; height: 16px; accent-color: var(--blue); flex-shrink: 0; }
  .payment-option-info { flex: 1; }
  .payment-option-info h4 { font-size: 0.88rem; font-weight: 600; color: var(--navy); margin-bottom: 2px; }
  .payment-option-info p { font-size: 0.76rem; color: var(--text-mid); font-weight: 300; }
  .payment-icons { display: flex; gap: 5px; flex-shrink: 0; }
  .payment-icon { padding: 3px 7px; background: var(--off-white); border: 1px solid var(--gray-light); border-radius: 4px; font-size: 0.68rem; font-weight: 700; color: var(--text-mid); }
  .card-fields { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-top: 14px; }
  .terms-check { display: flex; align-items: flex-start; gap: 9px; padding: 13px; background: var(--off-white); border-radius: 9px; margin-bottom: 14px; }
  .terms-check input { width: 15px; height: 15px; margin-top: 2px; accent-color: var(--blue); flex-shrink: 0; }
  .terms-check label { font-size: 0.79rem; color: var(--text-mid); line-height: 1.5; }
  .terms-check a { color: var(--blue); }
  .btn-pay { width: 100%; padding: 15px; background: var(--gold); color: var(--navy); border: none; border-radius: 11px; font-weight: 700; font-size: 0.97rem; cursor: pointer; font-family: 'DM Sans', sans-serif; transition: all 0.2s; display: flex; align-items: center; justify-content: center; gap: 7px; }
  .btn-pay:hover { background: var(--gold-light); transform: translateY(-1px); box-shadow: 0 6px 20px rgba(201,168,76,0.3); }
  .secure-note { display: flex; align-items: center; justify-content: center; gap: 5px; margin-top: 10px; font-size: 0.76rem; color: var(--gray); }
  /* Order summary */
  .order-summary { background: var(--white); border-radius: 16px; padding: 24px 22px; border: 1px solid var(--gray-light); position: sticky; top: 90px; }
  .order-summary h3 { font-size: 1.1rem; color: var(--navy); margin-bottom: 18px; padding-bottom: 12px; border-bottom: 1px solid var(--gray-light); }
  .summary-item { display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; padding: 9px 0; border-bottom: 1px solid var(--gray-light); font-size: 0.84rem; }
  .summary-item:last-of-type { border-bottom: none; }
  .summary-item-name { color: var(--text-mid); flex: 1; }
  .summary-item-price { font-weight: 600; color: var(--navy); flex-shrink: 0; }
  .summary-total-row { display: flex; justify-content: space-between; align-items: center; padding-top: 14px; border-top: 2px solid var(--navy); margin-top: 6px; }
  .summary-total-label { font-weight: 700; color: var(--navy); font-size: 0.9rem; }
  .summary-total-price { font-family: 'Playfair Display', serif; font-size: 1.4rem; font-weight: 700; color: var(--navy); }
  .summary-vat { font-size: 0.72rem; color: var(--gray); margin-top: 3px; text-align: right; }
  .trust-badges { margin-top: 18px; padding-top: 14px; border-top: 1px solid var(--gray-light); display: flex; flex-direction: column; gap: 7px; }
  .trust-badge { display: flex; align-items: center; gap: 7px; font-size: 0.78rem; color: var(--text-mid); }
  .trust-check-icon { width: 13px; height: 13px; color: var(--green); flex-shrink: 0; }
  .trust-badge-icon { color: var(--green); font-size: 0.82rem; }

  /* ── SUCCESS ── */
  .success-view { max-width: 520px; margin: 0 auto; text-align: center; padding: 50px 20px; }
  .success-icon { width: 72px; height: 72px; background: #E8F5E9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px; border: 3px solid #81C784; } .success-icon i { width: 36px; height: 36px; color: var(--green); }
  .success-view h2 { font-size: 1.8rem; color: var(--navy); margin-bottom: 12px; }
  .success-view p { color: var(--text-mid); font-size: 0.92rem; line-height: 1.7; margin-bottom: 28px; font-weight: 300; }
  .success-details { background: var(--white); border-radius: 12px; padding: 20px; border: 1px solid var(--gray-light); margin-bottom: 24px; text-align: left; }
  .success-detail-row { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--gray-light); font-size: 0.85rem; }
  .success-detail-row:last-child { border-bottom: none; }
  .success-detail-label { color: var(--text-mid); }
  .success-detail-value { font-weight: 600; color: var(--navy); }
  .btn-back-home { display: inline-block; background: var(--navy); color: var(--white); padding: 13px 30px; border-radius: 10px; font-weight: 700; text-decoration: none; transition: background 0.2s; }
  .btn-back-home:hover { background: var(--blue); }

  /* ── RESPONSIVE ── */
  @media (max-width: 768px) {
    /* Mobile nav */
    .hamburger { display: flex; }
    .nav-links {
      display: none;
      position: fixed; top: 0; left: 0; right: 0; bottom: 0;
      background: var(--white);
      flex-direction: column; align-items: center; justify-content: center;
      gap: 28px; z-index: 199;
    }
    .nav-links.open { display: flex; }
    .nav-links a { font-size: 1.1rem; }
    .btn-nav { padding: 12px 36px !important; font-size: 1rem !important; border-radius: 10px; }
    .nav-cart-btn span:not(.cart-badge) { display: none; }

    /* Packages */
    .packages-row { grid-template-columns: 1fr; }

    /* Services */
    .services-grid { grid-template-columns: 1fr; }

    /* Checkout */
    .checkout-grid { grid-template-columns: 1fr; }
    .order-summary { position: static; }
    .form-row { grid-template-columns: 1fr; }
    .card-fields { grid-template-columns: 1fr; }

    /* Steps */
    .step-label { display: none; }
    .step-item { padding: 0 10px; }
  }
  @media (min-width: 769px) and (max-width: 1024px) {
    .packages-row { grid-template-columns: 1fr 1fr; }
    .checkout-grid { grid-template-columns: 1fr 300px; }
  }
</style>
</head>
<body>

<!-- NAV -->
<nav id="navbar">
  <a href="index.html" class="logo">Immo<span>Lotse</span></a>
  <div class="nav-links" id="navLinks">
    <a href="index.html#leistungen">Leistungen</a>
    <a href="index.html#pakete">Pakete</a>
    <a href="blog.html">Blog</a>
    <a href="index.html#faq">FAQ</a>
    <a href="index.html#kontakt">Kontakt</a>
    <a href="shop.html" class="btn-nav active">Jetzt buchen</a>
  </div>
  <div class="nav-right">
    <button class="nav-cart-btn" onclick="toggleCart()">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg> <span>Warenkorb</span>
      <span class="cart-badge" id="cartBadge">0</span>
    </button>
    <button class="hamburger" id="hamburger" onclick="toggleMenu()">
      <span></span><span></span><span></span>
    </button>
  </div>
</nav>

<!-- PAGE HEADER -->
<div class="page-header">
  <h1>Jetzt buchen</h1>
  <p>Wähle dein Paket oder einzelne Leistungen – kein Maklervertrag, nur was du brauchst.</p>
</div>

<!-- STEPS BAR -->
<div class="steps-bar">
  <div class="step-item">
    <div class="step-circle active" id="step1-circle">1</div>
    <span class="step-label active" id="step1-label">Leistungen</span>
  </div>
  <div class="step-item">
    <div class="step-circle inactive" id="step2-circle">2</div>
    <span class="step-label" id="step2-label">Angaben</span>
  </div>
  <div class="step-item">
    <div class="step-circle inactive" id="step3-circle">3</div>
    <span class="step-label" id="step3-label">Bezahlung</span>
  </div>
  <div class="step-item">
    <div class="step-circle inactive" id="step4-circle">4</div>
    <span class="step-label" id="step4-label">Bestätigung</span>
  </div>
</div>

<!-- SHOP VIEW -->
<div class="shop-main">
  <div class="view active" id="view-shop">

    <!-- PACKAGES -->
    <div class="section-header">
      <h2>Komplettpakete</h2>
      <p>Alles inklusive – wähle das passende Paket für deinen Verkauf</p>
    </div>
    <div class="packages-row">
      <div class="pkg" id="pkg-starter" onclick="togglePackage('starter', 449)">
        <div class="selected-check">✓</div>
        <div class="pkg-name">Starter</div>
        <div class="pkg-price">€ 449</div>
        <div class="pkg-save">Spare €47 vs. Einzelbuchung</div>
        <ul class="pkg-features">
          <li>Basis-Fotoshooting (10 Bilder)</li>
          <li>Professionelles Exposé</li>
          <li>Inserat auf Willhaben</li>
          <li>Lieferung in 48 Stunden</li>
        </ul>
        <button class="btn-add-pkg">Paket wählen</button>
      </div>
      <div class="pkg popular" id="pkg-professional" onclick="togglePackage('professional', 1190)">
        <div class="selected-check">✓</div>
        <div class="pkg-badge">Beliebteste Wahl</div>
        <div class="pkg-name">Professional</div>
        <div class="pkg-price">€ 1.190</div>
        <div class="pkg-save">Spare €334 vs. Einzelbuchung</div>
        <ul class="pkg-features">
          <li>Premium Fotos + KI-Bearbeitung</li>
          <li>Hochwertiges Exposé</li>
          <li>Alle Unterlagen eingeholt</li>
          <li>Werteinschätzung inklusive</li>
          <li>Inserat optimiert & geschaltet</li>
        </ul>
        <button class="btn-add-pkg">Paket wählen</button>
      </div>
      <div class="pkg" id="pkg-fullservice" onclick="togglePackage('fullservice', 2590)">
        <div class="selected-check">✓</div>
        <div class="pkg-name">Full-Service</div>
        <div class="pkg-price">€ 2.590</div>
        <div class="pkg-save">Spare bis zu €12.000 Provision</div>
        <ul class="pkg-features">
          <li>Alles aus Professional</li>
          <li>3 Besichtigungstermine</li>
          <li>Interessentenfilterung</li>
          <li>Persönliche Betreuung</li>
          <li>Keine Provision bei Verkauf</li>
        </ul>
        <button class="btn-add-pkg">Paket wählen</button>
      </div>
    </div>

    <div class="or-divider"><span>— oder einzelne Leistungen wählen —</span></div>

    <!-- SERVICES -->
    <div class="section-header">
      <h2>Einzelleistungen</h2>
      <p>Kombiniere frei nach Bedarf – du zahlst nur was du wirklich brauchst</p>
    </div>
    <div class="services-grid">

      <div class="service-card" id="svc-foto-basis" onclick="toggleService('foto-basis','CAM','Fotoshooting – Basis (10 Bilder)',249)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg></div>
          <div class="service-text">
            <h4>Fotoshooting – Basis</h4>
            <p>10 professionelle Bilder deiner Immobilie, aufgenommen vor Ort</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 249</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-foto-premium" onclick="toggleService('foto-premium','PRE','Fotoshooting Premium + KI-Bearbeitung',399)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"/><path d="m14 7 3 3"/><path d="M5 6v4"/><path d="M19 14v4"/><path d="M10 2v2"/><path d="M7 8H3"/><path d="M21 16h-4"/><path d="M11 3H9"/></svg></div>
          <div class="service-text">
            <h4>Fotoshooting Premium + KI</h4>
            <p>10 Bilder + professionelle KI-Bearbeitung, optimiert für Portale</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 399</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-ki-bilder" onclick="toggleService('ki-bilder','KI','KI-Bildoptimierung (eigene Fotos)',99)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M15 2v2M9 2v2M15 20v2M9 20v2M2 15h2M2 9h2M20 15h2M20 9h2"/></svg></div>
          <div class="service-text">
            <h4>KI-Bildoptimierung</h4>
            <p>Eigene Fotos aufbereiten – bis 15 Bilder, Lieferung in 24h</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 99</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-expose" onclick="toggleService('expose','EXP','Professionelles Exposé erstellen',149)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg></div>
          <div class="service-text">
            <h4>Exposé erstellen</h4>
            <p>Professionelles Exposé mit Texten, Grundriss und Layout</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 149</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-unterlagen" onclick="toggleService('unterlagen','DOK','Unterlagen einholen',149)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"/></svg></div>
          <div class="service-text">
            <h4>Unterlagen einholen</h4>
            <p>Grundbuchauszug, Energieausweis, Betriebskosten – wir holen alles</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 149</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-inserat" onclick="toggleService('inserat','INS','Inserat schalten & optimieren',79)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="m3 11 18-5v12L3 14v-3z"/><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6"/></svg></div>
          <div class="service-text">
            <h4>Inserat schalten</h4>
            <p>SEO-optimiertes Inserat auf Willhaben inkl. Texte und Keywords</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 79</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-besichtigung" onclick="toggleService('besichtigung','BES','Besichtigung durchführen (pro Termin)',79)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg></div>
          <div class="service-text">
            <h4>Besichtigung durchführen</h4>
            <p>Wir führen den Besichtigungstermin professionell für dich durch</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 79</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

      <div class="service-card" id="svc-wert" onclick="toggleService('wert','WRT','Werteinschätzung',99)">
        <div class="service-top">
          <div class="service-icon-box"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg></div>
          <div class="service-text">
            <h4>Werteinschätzung</h4>
            <p>Marktpreisanalyse basierend auf aktuellen Vergleichswerten</p>
          </div>
        </div>
        <div class="service-bottom">
          <span class="service-price-tag">€ 99</span>
          <button class="btn-add-service">+ Hinzufügen</button>
        </div>
      </div>

    </div>

    <div class="proceed-bar">
      <button class="btn-proceed" onclick="proceedToCheckout()">Zur Kasse gehen →</button>
      <p class="proceed-note" id="proceedNote">Noch nichts im Warenkorb? Füge zuerst Leistungen hinzu.</p>
    </div>
  </div>

  <!-- CHECKOUT VIEW -->
  <div class="view" id="view-checkout">
    <button class="back-btn" onclick="goBack()">← Zurück zur Auswahl</button>
    <div class="checkout-grid">
      <div>
        <div class="checkout-form-box">
          <h3 class="form-section-title"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg> Deine Kontaktdaten</h3>
          <div class="form-row">
            <div class="form-group"><label class="form-label">Vorname *</label><input type="text" class="form-input" placeholder="Max"></div>
            <div class="form-group"><label class="form-label">Nachname *</label><input type="text" class="form-input" placeholder="Mustermann"></div>
          </div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">E-Mail *</label><input type="email" class="form-input" placeholder="max@beispiel.at"></div>
            <div class="form-group"><label class="form-label">Telefon *</label><input type="tel" class="form-input" placeholder="+43 664 ..."></div>
          </div>
        </div>
        <div class="checkout-form-box">
          <h3 class="form-section-title"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></svg> Adresse der Immobilie</h3>
          <div class="form-row full">
            <div class="form-group"><label class="form-label">Straße & Hausnummer *</label><input type="text" class="form-input" placeholder="Mariahilfer Straße 100"></div>
          </div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">PLZ *</label><input type="text" class="form-input" placeholder="1060"></div>
            <div class="form-group"><label class="form-label">Ort *</label><input type="text" class="form-input" placeholder="Wien"></div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">Bundesland *</label>
              <select class="form-select">
                <option value="">Bitte wählen...</option>
                <option>Wien</option><option>Niederösterreich</option><option>Oberösterreich</option>
                <option>Steiermark</option><option>Tirol</option><option>Salzburg</option>
                <option>Kärnten</option><option>Vorarlberg</option><option>Burgenland</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Art der Immobilie *</label>
              <select class="form-select">
                <option value="">Bitte wählen...</option>
                <option>Eigentumswohnung</option><option>Einfamilienhaus</option>
                <option>Mehrfamilienhaus</option><option>Reihenhaus</option>
                <option>Dachgeschoss</option><option>Grundstück</option><option>Gewerbeimmobilie</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group"><label class="form-label">Wohnfläche (m²)</label><input type="number" class="form-input" placeholder="85"></div>
            <div class="form-group"><label class="form-label">Zimmeranzahl</label><input type="number" class="form-input" placeholder="3"></div>
          </div>
          <div class="form-row full">
            <div class="form-group"><label class="form-label">Anmerkungen (optional)</label><textarea class="form-textarea" placeholder="Besonderheiten, Wunschtermin, Zugang..."></textarea></div>
          </div>
        </div>
        <div class="checkout-form-box">
          <h3 class="form-section-title"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="14" x="2" y="5" rx="2"/><line x1="2" x2="22" y1="10" y2="10"/></svg> Zahlungsmethode</h3>
          <div class="payment-options">
            <label class="payment-option selected" onclick="selectPayment(this)">
              <input type="radio" name="payment" value="card" checked>
              <div class="payment-option-info"><h4>Kreditkarte / Debitkarte</h4><p>Visa, Mastercard, American Express</p></div>
              <div class="payment-icons"><span class="payment-icon">VISA</span><span class="payment-icon">MC</span></div>
            </label>
            <label class="payment-option" onclick="selectPayment(this)">
              <input type="radio" name="payment" value="paypal">
              <div class="payment-option-info"><h4>PayPal</h4><p>Sicher mit deinem PayPal-Konto</p></div>
              <div class="payment-icons"><span class="payment-icon">PP</span></div>
            </label>
            <label class="payment-option" onclick="selectPayment(this)">
              <input type="radio" name="payment" value="bank">
              <div class="payment-option-info"><h4>Banküberweisung</h4><p>Bearbeitung startet nach Zahlungseingang</p></div>
              <div class="payment-icons"><span class="payment-icon">BANK</span></div>
            </label>
          </div>
          <div class="card-fields" id="cardFields">
            <div class="form-group" style="grid-column:1/-1;"><label class="form-label">Karteninhaber *</label><input type="text" class="form-input" placeholder="Max Mustermann"></div>
            <div class="form-group" style="grid-column:1/-1;"><label class="form-label">Kartennummer *</label><input type="text" class="form-input" placeholder="1234 5678 9012 3456" maxlength="19"></div>
            <div class="form-group"><label class="form-label">Ablaufdatum *</label><input type="text" class="form-input" placeholder="MM/JJ" maxlength="5"></div>
            <div class="form-group"><label class="form-label">CVV *</label><input type="text" class="form-input" placeholder="123" maxlength="4"></div>
          </div>
          <div style="margin-top:18px;">
            <div class="terms-check">
              <input type="checkbox" id="terms">
              <label for="terms">Ich akzeptiere die <a href="#">AGB</a> und <a href="#">Datenschutzerklärung</a>. Ich bestätige, dass ich Eigentümer oder bevollmächtigter Vertreter der Immobilie bin.</label>
            </div>
            <button class="btn-pay" onclick="processPayment()"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="11" x="3" y="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg> Jetzt sicher bezahlen – <span id="payAmount">€ 0</span></button>
            <div class="secure-note"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg> SSL-verschlüsselt · Deine Daten sind sicher</div>
          </div>
        </div>
      </div>
      <div class="order-summary">
        <h3>Deine Bestellung</h3>
        <div id="summaryItems"></div>
        <div class="summary-total-row">
          <span class="summary-total-label">Gesamt</span>
          <div><div class="summary-total-price" id="summaryTotal">€ 0</div><div class="summary-vat">inkl. 20% MwSt.</div></div>
        </div>
        <div class="trust-badges">
          <div class="trust-badge"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Keine Provision bei Verkauf</div>
          <div class="trust-badge"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Lieferung in 48 Stunden</div>
          <div class="trust-badge"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Österreichweit tätig</div>
          <div class="trust-badge"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg> Persönlicher Ansprechpartner</div>
        </div>
      </div>
    </div>
  </div>

  <!-- SUCCESS VIEW -->
  <div class="view" id="view-success">
    <div class="success-view">
      <div class="success-icon"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div>
      <h2>Buchung bestätigt!</h2>
      <p>Vielen Dank für deine Buchung. Wir haben dir eine Bestätigung per E-Mail geschickt und melden uns innerhalb von 24 Stunden bei dir.</p>
      <div class="success-details">
        <div class="success-detail-row"><span class="success-detail-label">Bestellnummer</span><span class="success-detail-value">#IL-2025-0142</span></div>
        <div class="success-detail-row"><span class="success-detail-label">Status</span><span class="success-detail-value" style="color:var(--green)">✓ Bezahlt</span></div>
        <div class="success-detail-row"><span class="success-detail-label">Bearbeitungsstart</span><span class="success-detail-value">Innerhalb 24 Stunden</span></div>
        <div class="success-detail-row"><span class="success-detail-label">Lieferung</span><span class="success-detail-value">Innerhalb 48 Stunden</span></div>
      </div>
      <a href="index.html" class="btn-back-home">Zurück zur Startseite</a>
    </div>
  </div>
</div>

<!-- CART OVERLAY -->
<div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>
<div class="cart-panel" id="cartPanel">
  <div class="cart-header">
    <h2 class="cart-title"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg> Warenkorb</h2>
    <button class="cart-close" onclick="toggleCart()">✕</button>
  </div>
  <div class="cart-items" id="cartItems">
    <div class="cart-empty"><div class="cart-empty-icon"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg></div><p>Dein Warenkorb ist leer.<br>Füge Leistungen hinzu.</p></div>
  </div>
  <div class="cart-footer">
    <div class="cart-total-row">
      <span class="cart-total-label">Gesamtbetrag</span>
      <span class="cart-total-amount" id="cartTotal">€ 0</span>
    </div>
    <div class="cart-note">inkl. 20% MwSt. · Kein Maklervertrag</div>
    <button class="btn-checkout" id="checkoutBtn" onclick="proceedToCheckout()" disabled>Zur Kasse →</button>
  </div>
</div>

<script>
  let cart = [];
  let selectedPackage = null;
  const packageData = {
    starter: { id: 'pkg-starter', emoji: 'S', name: 'Starter-Paket', price: 449 },
    professional: { id: 'pkg-professional', emoji: 'P', name: 'Professional-Paket', price: 1190 },
    fullservice: { id: 'pkg-fullservice', emoji: 'F', name: 'Full-Service-Paket', price: 2590 }
  };

  function togglePackage(key, price) {
    cart = cart.filter(i => !i.isPackage);
    Object.keys(packageData).forEach(k => document.getElementById(packageData[k].id).classList.remove('selected'));
    if (selectedPackage === key) { selectedPackage = null; }
    else {
      selectedPackage = key;
      const pkg = packageData[key];
      document.getElementById(pkg.id).classList.add('selected');
      cart.push({ id: key, emoji: pkg.emoji, name: pkg.name, price: pkg.price, isPackage: true });
    }
    updateCart();
  }

  function toggleService(id, emoji, name, price) {
    const card = document.getElementById('svc-' + id);
    const existing = cart.findIndex(i => i.id === id);
    if (existing > -1) {
      cart.splice(existing, 1);
      card.classList.remove('in-cart');
      card.querySelector('.btn-add-service').textContent = '+ Hinzufügen';
    } else {
      cart.push({ id, emoji, name, price, isPackage: false });
      card.classList.add('in-cart');
      card.querySelector('.btn-add-service').textContent = '✓ Entfernen';
    }
    updateCart();
  }

  function updateCart() {
    const total = cart.reduce((s, i) => s + i.price, 0);
    document.getElementById('cartBadge').textContent = cart.length;
    document.getElementById('cartTotal').textContent = '€ ' + total.toLocaleString('de-AT');
    document.getElementById('payAmount').textContent = '€ ' + total.toLocaleString('de-AT');
    document.getElementById('summaryTotal').textContent = '€ ' + total.toLocaleString('de-AT');
    const btn = document.getElementById('checkoutBtn');
    btn.disabled = cart.length === 0;
    btn.textContent = cart.length > 0 ? `Zur Kasse → € ${total.toLocaleString('de-AT')}` : 'Zur Kasse →';
    const note = document.getElementById('proceedNote');
    if (note) note.style.display = cart.length > 0 ? 'none' : 'block';
    const container = document.getElementById('cartItems');
    container.innerHTML = cart.length === 0
      ? '<div class="cart-empty"><div class="cart-empty-icon"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="8" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"/></svg></div><p>Dein Warenkorb ist leer.</p></div>'
      : cart.map(item => `<div class="cart-item"><div class="cart-item-badge">${item.isPackage ? item.emoji : item.name.substring(0,2).toUpperCase()}</div><div class="cart-item-info"><div class="cart-item-name">${item.name}</div><div class="cart-item-price">€ ${item.price.toLocaleString('de-AT')}</div></div><button class="cart-item-remove" onclick="removeItem('${item.id}',${item.isPackage})">✕</button></div>`).join('');
    document.getElementById('summaryItems').innerHTML = cart.map(item => `<div class="summary-item"><span class="summary-item-name">${item.name}</span><span class="summary-item-price">€ ${item.price.toLocaleString('de-AT')}</span></div>`).join('');
  }

  function removeItem(id, isPackage) {
    if (isPackage) { selectedPackage = null; Object.keys(packageData).forEach(k => document.getElementById(packageData[k].id).classList.remove('selected')); }
    else { const card = document.getElementById('svc-' + id); if (card) { card.classList.remove('in-cart'); card.querySelector('.btn-add-service').textContent = '+ Hinzufügen'; } }
    cart = cart.filter(i => i.id !== id);
    updateCart();
  }

  function toggleCart() {
    document.getElementById('cartPanel').classList.toggle('open');
    document.getElementById('cartOverlay').classList.toggle('open');
  }

  function proceedToCheckout() {
    if (cart.length === 0) { alert('Bitte füge zuerst Leistungen hinzu.'); return; }
    document.getElementById('cartPanel').classList.remove('open');
    document.getElementById('cartOverlay').classList.remove('open');
    showView('view-checkout'); setStep(2);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function goBack() { showView('view-shop'); setStep(1); window.scrollTo({ top: 0, behavior: 'smooth' }); }

  function processPayment() {
    if (!document.getElementById('terms').checked) { alert('Bitte akzeptiere die AGB um fortzufahren.'); return; }
    showView('view-success'); setStep(4);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }

  function showView(id) { document.querySelectorAll('.view').forEach(v => v.classList.remove('active')); document.getElementById(id).classList.add('active'); }

  function setStep(n) {
    for (let i = 1; i <= 4; i++) {
      const c = document.getElementById(`step${i}-circle`);
      const l = document.getElementById(`step${i}-label`);
      if (i < n) { c.className = 'step-circle done'; c.textContent = '✓'; l.className = 'step-label done'; }
      else if (i === n) { c.className = 'step-circle active'; c.textContent = i; l.className = 'step-label active'; }
      else { c.className = 'step-circle inactive'; c.textContent = i; l.className = 'step-label'; }
    }
  }

  function selectPayment(el) {
    document.querySelectorAll('.payment-option').forEach(o => o.classList.remove('selected'));
    el.classList.add('selected');
    document.getElementById('cardFields').style.display = el.querySelector('input').value === 'card' ? 'grid' : 'none';
  }

  function toggleMenu() {
    document.getElementById('navLinks').classList.toggle('open');
    document.getElementById('hamburger').classList.toggle('open');
  }

  updateCart();
</script>
</body>
</html>
